CREATE DATABASE EQUIP_BD;

USE EQUIP_BD;

CREATE TABLE GRUPO(
    Nome VARCHAR(255) PRIMARY KEY,
    Dono VARCHAR(255) NOT NULL,
    Phone INT NOT NULL,
    NIF INT NOT NULL
);

CREATE TABLE SISTEMA(
    Nome VARCHAR(255) PRIMARY KEY,
    Fabricante VARCHAR(255) NOT NULL
);

CREATE TABLE COMANDO(
    Nome_codigo VARCHAR(255) PRIMARY KEY,
    Comando VARCHAR(255) NOT NULL,
    Descricao VARCHAR(255),
    OS VARCHAR(255) NOT NULL,
    CONSTRAINT oscmd_nome FOREIGN KEY (OS) REFERENCES SISTEMA(Nome)
);

CREATE TABLE EQUIPAMENTO (
    Nome VARCHAR(255) PRIMARY KEY,
    Ip_Nome VARCHAR(255) NOT NULL,
    Username VARCHAR(255) NOT NULL,
    Pass VARCHAR(255),
    OS VARCHAR(255) NOT NULL,
    Grupo VARCHAR(255) NOT NULL,
    CONSTRAINT fk_os_nome FOREIGN KEY (OS) REFERENCES SISTEMA(Nome),
    CONSTRAINT fk_grupo_nomegrupo FOREIGN KEY (Grupo) REFERENCES GRUPO(Nome)
);

INSERT INTO SISTEMA (Nome, Fabricante)
VALUES
    ('Windows10', 'Microsoft'),
    ('Ubuntu20.04', 'Canonical'),
    ('RouterOS', 'Microtik'),
    ('SwitchOS', 'Microtik'),
    ('Cisco IOS', 'Cisco');
